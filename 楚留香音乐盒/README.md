# 楚留香音乐盒

#### 一个在楚留香游戏中自动弹奏乐曲的小工具  

#### 使用的乐谱可以从midi文件转换而成

-----------------------------------------------

### 基础使用:  

首先打开楚留香，进入乐器演奏界面，之后把游戏放到后台.  
打开脚本，如果弹出无障碍服务选择窗口，请打开脚本的无障碍权限。  
选择演奏乐曲，选择一首乐曲。之后脚本会加载数据，你需要稍等一下  
之后会弹出一个选择音轨的界面。一般的midi音乐主旋律都是音轨1。但是如果选1只能听见伴奏，你也可以试试选别的。  
选择之后切回楚留香，乐曲会在3秒后自动开始弹奏。中途按音量上键可以终止脚本。  
如果乐曲听起来十分奇怪或者有一些音符好像丢失了，你可以在设置中调节音高。  
(实际上由于楚留香的限制(没有半音并且只有3个八度)，有些乐曲无论怎么调都感觉很奇怪..)

-----------------------------------  

### 乐谱转换:  

找到一首midi格式的乐曲，下载到本地。(最好选择音轨数少的，只有一个音轨最好)  
之后打开[这个网站](https://tonejs.github.io/Midi)  
点击网页中的"Drop a midi file here"，上传你从网上下载的.mid格式的音乐  
之后解析后的代码会出现在下面的空白框里，全选复制下来(数据量大的话可能会有点卡)  
打开文件管理器，找到手机内部存储根目录(/sdcard/)里名叫"楚留香音乐盒数据目录"的文件夹并进入。  
新建一个.json文件(例如"小苹果.json")，打开那个文件，把复制的代码粘贴进去保存退出。  
ok，重新打开脚本之后你就可以看到添加的乐曲了~  
